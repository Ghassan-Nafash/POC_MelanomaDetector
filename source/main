from utilities import *
from preprocessing import *
import segmentation
from postprocessing import Postprocessing 


if __name__ == "__main__":
    start_index = 29422
    end_index = 29429
    # images = Utilities.load("D:/Uni/WS 22-23/Digitale Bildverarbeitung/common_dataset/Dataset/", 29422, 29429)
    images = Utilities.load("C:/Users/ancik/Documents/GitHub/Dataset/", start_index, end_index)
    for img_number in images.keys():
        img = images[img_number]

        '''
        # preprocessing
        gamma_image = Preprocessing.gamma_correction(img, gamma=0.85)
        blured_img = Preprocessing.blur(gamma_image)
        seg = segmentation.NormalizedOtsuThresholding.segment(blured_img)
        result = Postprocessing.find_contours(seg)            
        #seg = segmentation.MorphACWE.segment(img)
        Utilities.display(image=img, cont=result, title="test")
        '''

        '''
        # Testing Color Filter
        seg_test = segmentation.ColorFilter.segment(img)
        segmentation.ColorFilter.display(seg_test, None)
        '''
        
        # Testing 
        # gamma_image = Preprocessing.gamma_correction(img, gamma=0.85)
        # blured_img = Preprocessing.blur(gamma_image)
        # seg = segmentation.NormalizedOtsuThresholding.segment(blured_img)
        # result = Postprocessing.find_contours(seg)            
        bin_img = segmentation.MorphACWE.segment(img)
        # segmentation.MorphACWE.display(image=img, cont=level_set)
        plt.imshow(bin_img, cmap='grey')
        plt.show()
        
